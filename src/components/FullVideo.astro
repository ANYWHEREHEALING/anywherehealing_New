---
import bgImage from '../assets/bg-video.jpg';
---

<section class="healing-hero">
  <div class="container">
    <!-- LEFT: Description -->
    <div class="hero-text">
      <p class="eyebrow">MEET ANYWHERE HEALING</p>
      <h2 class="headline">The Technology Helping Your Body Heal Naturally</h2>
      <p class="copy">
        Our wearable devices use advanced biosensors that gently touch your skin,
        reading your bodyâ€™s signals and delivering precise healing frequencies.
        These frequencies activate your bodyâ€™s natural recovery systems, helping
        reduce pain, improve sleep, restore balance, and boost overall well-being.
      </p>
    </div>

    <!-- RIGHT: Video -->
    <div class="hero-video">
      <div class="video-card">
        <div class="bg" style={`background:url(${bgImage.src}) center/cover no-repeat`}></div>
        <button class="play-btn" aria-label="Play video">
          <svg viewBox="0 0 60 60" fill="currentColor" aria-hidden="true">
            <path d="M20 12v36l30-18z"/>
          </svg>
          <span class="play-label">Play Video</span>
        </button>
      </div>
    </div>
  </div>
</section>

<style lang="scss">
/* ---------- Layout ---------- */
.healing-hero {
  padding: clamp(56px, 6vw, 88px) 0;
  background: #fff;
}
.container {
  max-width: 1200px;   /* matches the visual width of the reference */
  margin: 0 auto;
  padding: 0 clamp(16px, 3vw, 32px);
  display: grid;
  grid-template-columns: minmax(420px, 520px) 1fr; /* fixed-ish text column, flexible video */
  column-gap: clamp(28px, 4vw, 56px);
  align-items: center; /* vertical center like Apollo */
}

/* ---------- Typography (Apollo-like scale) ---------- */
.eyebrow {
  margin: 0 0 0.5rem 0;
  font-size: clamp(12px, 0.85vw, 14px);
  font-weight: 600;
  letter-spacing: 0.12em;
  color: #666;
  text-transform: uppercase;
}
.headline {
  margin: 0 0 0.8rem 0;
  /* ~32â€“40px across breakpoints */
  font-size: clamp(28px, 2.4vw + 6px, 40px);
  line-height: 1.25;
  font-weight: 750;
  color: #111;
}
.copy {
  margin: 0;
  /* ~17â€“19px across breakpoints */
  font-size: clamp(16px, 0.9vw + 8px, 19px);
  line-height: 1.65;
  color: #3f3f3f;
  max-width: 52ch;  /* keeps the paragraph readable */
}

/* ---------- Video card ---------- */
.hero-video { width: 100%; }
.video-card {
  position: relative;
  width: 100%;
  aspect-ratio: 16 / 9;
  border-radius: 14px;
  overflow: hidden;
  box-shadow:
    0 1px 2px rgba(0,0,0,.04),
    0 8px 24px rgba(0,0,0,.08);  /* soft card feel like the reference */
}
.video-card .bg {
  position: absolute; inset: 0; z-index: 1;
}
.video-card { position: relative; }
.video-card .bg { position:absolute; inset:0; z-index:1; transition:opacity .2s ease; }
.video-card.playing .bg { opacity:0; visibility:hidden; }

/* the YT mount should sit above the poster */
#yt-player { position:absolute; inset:0; z-index:3; }

/* Play button + label (aligned like Apollo) */
.play-btn {
  position: absolute; inset: 0;
  margin: auto;
  width: 88px; height: 88px;
  display: inline-flex; align-items: center; justify-content: center;
  gap: 14px;
  border: 0; border-radius: 999px;
  background: #fff;
  color: #111;
  z-index: 2;
  cursor: pointer;
  box-shadow: 0 6px 18px rgba(0,0,0,.20);
  transition: transform .18s ease, box-shadow .18s ease;
}
.play-btn:hover { transform: scale(1.04); box-shadow: 0 10px 26px rgba(0,0,0,.22); }
.play-btn svg { width: 36px; height: 36px; }
.play-label {
  position: absolute;
  left: calc(50% + 70px);   /* sits to the right of the circle, like the screenshot */
  top: 50%; transform: translateY(-50%);
  font-size: clamp(12px, .9vw, 14px);
  font-weight: 600; letter-spacing: .04em;
  color: rgba(17,17,17,.9);
  text-transform: uppercase;
  pointer-events: none;
  white-space: nowrap;
}

/* ---------- Responsive ---------- */
@media (max-width: 980px) {
  .container {
    grid-template-columns: 1fr;
    row-gap: 28px;
    text-align: center;
  }

  /* Center the circle dead-center on the thumbnail */
  .play-btn {
    /* undo desktop centering-by-inset */
    inset: auto;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%); /* center */
    width: 84px;
    height: 84px;
    box-shadow: 0 8px 22px rgba(0,0,0,.20);
  }

  /* Put the label UNDER the circle and center it */
  .play-label {
    position: absolute;
    top: calc(50% + 62px);        /* circle center + radius + spacing */
    left: 50%;
    transform: translateX(-50%);
    margin: 0;
    font-size: 12px;
    letter-spacing: .08em;
    text-transform: uppercase;
    color: rgba(17,17,17,.9);
    background: rgba(255,255,255,.9);
    padding: 6px 10px;
    border-radius: 999px;
    box-shadow: 0 2px 8px rgba(0,0,0,.08);
  }
}

/* Small phones */
@media (max-width: 600px) {
  .play-btn { width: 76px; height: 76px; }
  .play-label { top: calc(50% + 58px); font-size: 11px; padding: 5px 9px; }
}

</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const btn  = document.querySelector('.play-btn');
    const card = document.querySelector('.video-card');
    if (!btn || !card) return;
  
    // Load YT API once and queue callbacks
    function loadYTApi(cb){
      if (window.YT && typeof YT.Player === 'function') return cb();
      (window._ytReadyCbs ||= []).push(cb);
      if (!window._ytApiLoading){
        window._ytApiLoading = true;
        const tag = document.createElement('script');
        tag.src = 'https://www.youtube.com/iframe_api';
        document.head.appendChild(tag);
        window.onYouTubeIframeAPIReady = () => {
          window._ytReadyCbs.forEach(fn => fn());
          window._ytReadyCbs = [];
        };
      }
    }
  
    btn.addEventListener('click', () => {
      // Mount for the player (above poster)
      const mount = document.createElement('div');
      mount.id = 'yt-player';
      mount.style.cssText = 'position:absolute;inset:0;z-index:3;';
      card.appendChild(mount);
  
      // Remove the fake button
      btn.remove();
  
      loadYTApi(() => {
        const player = new YT.Player('yt-player', {
          videoId: 'LdmuquUvU2k',
          playerVars: {
            autoplay: 1,
            playsinline: 1,
            rel: 0,
            modestbranding: 1,
            enablejsapi: 1
          },
          events: {
            onReady: (e) => {
              card.classList.add('playing');      // ðŸ”‘ hide the poster
              const p = e.target.playVideo?.();
              if (p && typeof p.then === 'function') {
                p.catch(() => {
                  // iOS may block audio: fallback to muted autoplay + chip
                  e.target.mute();
                  e.target.playVideo();
                  showUnmute(e.target);
                });
              }
            }
          }
        });
  
        function showUnmute(player) {
          const unmute = document.createElement('button');
          unmute.className = 'unmute-btn';
          unmute.textContent = 'Tap for sound';
          unmute.style.cssText = `
            position:absolute;left:50%;bottom:12px;transform:translateX(-50%);
            padding:8px 12px;border:0;border-radius:999px;background:#fff;
            box-shadow:0 6px 18px rgba(0,0,0,.18);font-size:12px;font-weight:600;letter-spacing:.06em;z-index:4;`;
          card.appendChild(unmute);
          unmute.addEventListener('click', () => { player.unMute(); unmute.remove(); });
        }
      });
    });
  });
  </script>
  